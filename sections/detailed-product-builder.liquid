{%- comment -%}
  Detailed Product Builder Section
  Provides a flexible page builder plus a custom editorial feature block.
{%- endcomment -%}

{{ 'section-multicolumn.css' | asset_url | stylesheet_tag }}
{{ 'component-slider.css' | asset_url | stylesheet_tag }}

<section class="section section--detailed-product-builder">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="h2">{{ section.settings.heading | escape }}</h2>
    {% endif %}

    {% if section.settings.content != blank %}
      <div class="rte">{{ section.settings.content }}</div>
    {% endif %}

    {% for block in section.blocks %}
      {% case block.type %}
        {% when 'editorial_product_feature' %}
          {% assign feature = block.settings.metaobject %}
          {%- assign featured_product = feature.linked_product | default: feature.featured_product | default: feature.product -%}
          <div
            class="editorial-feature__band"
            aria-hidden="true"
            style="background-color: {{ block.settings.band_colour }};"
          >
            &nbsp;
          </div>
          <div
            class="editorial-feature"
            {{ block.shopify_attributes }}
          >
            <div class="editorial-feature__stage">
              <!-- Main title at top -->
              <div class="editorial-feature__main-title" style="color: {{ block.settings.heading_colour }};">
                {{ feature.title | default: feature.name | escape }}
              </div>

              <!-- Intro text in top right -->
              <div class="editorial-feature__intro-text">
                {{
                  feature.intro_text
                  | default: 'In the face of a World driven by hype, fast fashion and rapidly changing trends we create high quality, timeless and joyful garments that will stand the test of time. We work with amazing artists and manufacturers who produce for very well-known luxury brands to bring you premium products that make a statement.'
                }}
              </div>

              {%- assign hero_image = feature.hero_image | default: feature.image | default: feature.featured_image -%}
              {%- assign small_image = feature.secondary_image_1 -%}
              {%- assign tertiary_image = feature.secondary_image_2 -%}

              {% if hero_image != blank %}
                <figure class="polaroid polaroid--hero">
                  <div class="polaroid__frame">
                    <img
                      src="{{ hero_image | image_url: width: 474 }}"
                      alt="{{ hero_image.alt | default: block.settings.hero_caption_override | escape }}"
                      loading="lazy"
                      width="474"
                      height="564"
                    >
                  </div>
                  {% assign hero_caption = block.settings.hero_caption_override
                    | default: feature.hero_caption
                    | default: feature.caption
                  %}
                  {% if hero_caption != blank %}
                    <figcaption class="polaroid__caption">{{ hero_caption }}</figcaption>
                  {% endif %}
                </figure>
              {% endif %}

              {% if small_image != blank %}
                <figure class="polaroid polaroid--small">
                  <div class="polaroid__frame">
                    <img
                      src="{{ small_image | image_url: width: 274 }}"
                      alt="{{ small_image.alt | escape }}"
                      loading="lazy"
                      width="274"
                      height="326"
                    >
                  </div>
                  {% if feature.small_caption != blank %}
                    <figcaption class="polaroid__caption">{{ feature.small_caption }}</figcaption>
                  {% endif %}
                </figure>
              {% endif %}

              {% if tertiary_image != blank %}
                <figure class="polaroid polaroid--tertiary">
                  <div class="polaroid__frame">
                    <img
                      src="{{ tertiary_image | image_url: width: 406 }}"
                      alt="{{ tertiary_image.alt | escape }}"
                      loading="lazy"
                      width="406"
                      height="483"
                    >
                  </div>
                  {% if feature.tertiary_caption != blank %}
                    <figcaption class="polaroid__caption">{{ feature.tertiary_caption }}</figcaption>
                  {% endif %}
                </figure>
              {% endif %}

              <div class="editorial-feature__copy">
                {% assign tag = feature.tag | default: feature.category %}
                {% if tag != blank %}
                  <p class="intro-text">{{ tag }}</p>
                {% endif %}
                {% assign title_tag = block.settings.heading_tag | default: 'h2' %}
                
                {% if featured_product != blank %}
                  <{{ title_tag }} class="feature-title">
                    <a href="{{ featured_product.url }}" class="feature-product-link">
                      {{- featured_product.title | escape -}}
                    </a>
                  </{{ title_tag }}>
                  <p class="feature-price">{{ featured_product.price | money }}</p>
                {% else %}
                  <{{ title_tag }} class="feature-title">
                    {{- feature.product_name | default: 'Product Title' | escape -}}
                  </{{ title_tag }}>
                  {% if feature.price != blank %}
                    <p class="feature-price">{{ feature.price }}</p>
                  {% else %}
                    <p class="feature-price">Â£XX</p>
                  {% endif %}
                {% endif %}
              </div>

              {% if feature.description != blank %}
                <div class="editorial-feature__description rte">{{ feature.description }}</div>
              {% else %}
                <div class="editorial-feature__description">
                  The 'Negroni' T-Shirt is 100% heavyweight cotton, designed for durability and longevity. It features
                  original artwork from London Artist Toby Ursell, including our classic Negroni motif on the chest and
                  our Aperitivo Digestivo vintage corkscrew on the back. The premium quality fabric and sturdy collar
                  construction ensures that this T-Shirt will be a wardrobe staple for years to come. It's available in
                  both white and navy.
                </div>
              {% endif %}

              {% if featured_product != blank and block.settings.show_product_button %}
                <div class="editorial-feature__cta">
                  <a href="{{ featured_product.url }}" class="button button--primary">
                    {{ block.settings.button_text | default: 'Shop Now' | escape }}
                  </a>
                </div>
              {% endif %}
            </div>
          </div>
        {% when 'multicolumn' %}
          <div class="detailed-product-multicolumn" {{ block.shopify_attributes }}>
            {%- style -%}
              .section-{{ section.id }}-{{ block.id }}-padding {
                padding-top: {{ block.settings.padding_top | times: 0.75 | round: 0 }}px;
                padding-bottom: {{ block.settings.padding_bottom | times: 0.75 | round: 0 }}px;
              }

              @media screen and (min-width: 750px) {
                .section-{{ section.id }}-{{ block.id }}-padding {
                  padding-top: {{ block.settings.padding_top }}px;
                  padding-bottom: {{ block.settings.padding_bottom }}px;
                }
              }
            {%- endstyle -%}

            {%- liquid
              assign columns_mobile_int = block.settings.columns_mobile | plus: 0
              assign show_mobile_slider = false
              assign column_blocks = section.blocks | where: 'type', 'column'

              if block.settings.swipe_on_mobile and column_blocks.size > columns_mobile_int
                assign show_mobile_slider = true
              endif
            -%}

            <div class="multicolumn color-{{ block.settings.color_scheme }} gradient{% unless block.settings.background_style == 'none' and settings.text_boxes_border_thickness > 0 or settings.text_boxes_shadow_opacity > 0 %} background-{{ block.settings.background_style }}{% endunless %}{% if block.settings.title == blank %} no-heading{% endif %}">
              <div
                class="page-width section-{{ section.id }}-{{ block.id }}-padding isolate{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                {% if settings.animations_reveal_on_scroll %}
                  data-cascade
                {% endif %}
              >
                {%- unless block.settings.title == blank -%}
                  <div class="title-wrapper-with-link title-wrapper--self-padded-mobile title-wrapper--no-top-margin multicolumn__title">
                    <h2 class="title inline-richtext {{ block.settings.heading_size }}">
                      {{ block.settings.title }}
                    </h2>
                    {%- if block.settings.button_label != blank and show_mobile_slider -%}
                      <a href="{{ block.settings.button_link }}" class="link underlined-link large-up-hide">
                        {{- block.settings.button_label | escape -}}
                      </a>
                    {%- endif -%}
                  </div>
                {%- endunless -%}

                <slider-component class="slider-mobile-gutter">
                  <ul
                    class="multicolumn-list contains-content-container grid grid--{{ block.settings.columns_mobile }}-col-tablet-down grid--{{ block.settings.columns_desktop }}-col-desktop{% if show_mobile_slider %} slider slider--tablet grid--peek{% endif %}"
                    id="Slider-{{ block.id }}"
                    role="list"
                  >
                    {%- liquid
                      assign highest_ratio = 0
                      for column_block in column_blocks
                        if column_block.settings.image.aspect_ratio > highest_ratio
                          assign highest_ratio = column_block.settings.image.aspect_ratio
                        endif
                      endfor
                    -%}

                    {%- for column_block in column_blocks -%}
                      {%- assign empty_column = '' -%}
                      {%- if column_block.settings.image == blank
                        and column_block.settings.title == blank
                        and column_block.settings.text == blank
                        and column_block.settings.link_label == blank
                      -%}
                        {%- assign empty_column = ' multicolumn-list__item--empty' -%}
                      {%- endif -%}

                      <li
                        class="multicolumn-list__item grid__item{% if block.settings.swipe_on_mobile %} slider__slide{% endif %}{% if block.settings.column_alignment == 'center' %} center{% endif %}{{ empty_column }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                        {{ column_block.shopify_attributes }}
                        {% if settings.animations_reveal_on_scroll %}
                          data-cascade
                          style="--animation-order: {{ forloop.index }};"
                        {% endif %}
                      >
                        <div class="multicolumn-card content-container">
                          {%- if column_block.settings.image != blank -%}
                            {% if block.settings.image_ratio == 'adapt' or block.settings.image_ratio == 'circle' %}
                              {% assign spaced_image = true %}
                            {% endif %}
                            <div class="multicolumn-card__image-wrapper multicolumn-card__image-wrapper--{{ block.settings.image_width }}-width{% if block.settings.image_width != 'full' or spaced_image %} multicolumn-card-spacing{% endif %}">
                              <div
                                class="media media--transparent media--{{ block.settings.image_ratio }}"
                                {% if block.settings.image_ratio == 'adapt' %}
                                  style="padding-bottom: {{ 1 | divided_by: highest_ratio | times: 100 }}%;"
                                {% endif %}
                              >
                                {%- liquid
                                  assign number_of_columns = block.settings.columns_desktop
                                  assign number_of_columns_mobile = block.settings.columns_mobile
                                  assign grid_space_desktop = number_of_columns | minus: 1 | times: settings.spacing_grid_horizontal | plus: 100 | append: 'px'
                                  assign grid_space_tablet = number_of_columns_mobile | minus: 1 | times: settings.spacing_grid_horizontal | plus: 100 | append: 'px'
                                  assign grid_space_mobile = number_of_columns_mobile | minus: 1 | times: settings.spacing_grid_horizontal | divided_by: 2 | plus: 30 | append: 'px'
                                  if block.settings.image_width == 'half'
                                    assign image_width = 0.5
                                  elsif block.settings.image_width == 'third'
                                    assign image_width = 0.33
                                  else
                                    assign image_width = 1
                                  endif
                                -%}

                                {% capture sizes %}
                                  (min-width: {{ settings.page_width }}px) calc(({{ settings.page_width }}px - {{ grid_space_desktop }}) * {{ image_width }} /  {{ number_of_columns }}),
                                  (min-width: 990px) calc((100vw - {{ grid_space_desktop }}) * {{ image_width }} / {{ number_of_columns }}),
                                  (min-width: 750px) calc((100vw - {{ grid_space_tablet }}) * {{ image_width }} / {{ number_of_columns_mobile }}),
                                  calc((100vw - {{ grid_space_mobile }}) * {{ image_width }} / {{ number_of_columns_mobile }})
                                {% endcapture %}

                                {{
                                  column_block.settings.image
                                  | image_url: width: 3200
                                  | image_tag:
                                    widths: '50, 75, 100, 150, 200, 300, 400, 500, 750, 1000, 1250, 1500, 1750, 2000, 2250, 2500, 2750, 3000, 3200',
                                    sizes: sizes,
                                    class: 'multicolumn-card__image'
                                }}
                              </div>
                            </div>
                          {%- endif -%}

                          <div class="multicolumn-card__info">
                            {%- if column_block.settings.title != blank -%}
                              <h3 class="inline-richtext">{{ column_block.settings.title }}</h3>
                            {%- endif -%}
                            {%- if column_block.settings.text != blank -%}
                              <div class="rte">{{ column_block.settings.text }}</div>
                            {%- endif -%}
                            {%- if column_block.settings.link_label != blank -%}
                              <a
                                class="link animate-arrow"
                                {% if column_block.settings.link == blank %}
                                  role="link" aria-disabled="true"
                                {% else %}
                                  href="{{ column_block.settings.link }}"
                                {% endif %}
                              >
                                {{- column_block.settings.link_label | escape -}}
                                <span class="svg-wrapper">
                                  <span class="icon-wrap">&nbsp;{{ 'icon-arrow.svg' | inline_asset_content }}</span>
                                </span>
                              </a>
                            {%- endif -%}
                          </div>
                        </div>
                      </li>
                    {%- endfor -%}
                  </ul>

                  {%- if show_mobile_slider -%}
                    <div class="slider-buttons large-up-hide">
                      <button
                        type="button"
                        class="slider-button slider-button--prev"
                        name="previous"
                        aria-label="{{ 'general.slider.previous_slide' | t }}"
                      >
                        <span class="svg-wrapper">{{ 'icon-caret.svg' | inline_asset_content }}</span>
                      </button>
                      <div class="slider-counter caption">
                        <span class="slider-counter--current">1</span>
                        <span aria-hidden="true"> / </span>
                        <span class="visually-hidden">{{ 'general.slider.of' | t }}</span>
                        <span class="slider-counter--total">{{ column_blocks.size }}</span>
                      </div>
                      <button
                        type="button"
                        class="slider-button slider-button--next"
                        name="next"
                        aria-label="{{ 'general.slider.next_slide' | t }}"
                      >
                        <span class="svg-wrapper">{{ 'icon-caret.svg' | inline_asset_content }}</span>
                      </button>
                    </div>
                  {%- endif -%}
                </slider-component>

                <div class="center{% if show_mobile_slider %} small-hide medium-hide{% endif %}">
                  {%- if block.settings.button_label != blank -%}
                    <a
                      class="button button--primary"
                      {% if block.settings.button_link == blank %}
                        role="link" aria-disabled="true"
                      {% else %}
                        href="{{ block.settings.button_link }}"
                      {% endif %}
                    >
                      {{ block.settings.button_label | escape }}
                    </a>
                  {%- endif -%}
                </div>
              </div>
            </div>
          </div>
      {% endcase %}
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Detailed product builder",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading" },
    { "type": "richtext", "id": "content", "label": "Intro content" }
  ],
  "blocks": [
    {
      "type": "editorial_product_feature",
      "name": "Editorial product feature",
      "limit": 1,
      "settings": [
        {
          "type": "metaobject",
          "id": "metaobject",
          "label": "Editorial product metaobject",
          "metaobject_type": "editorial_product_feature"
        },
        { "type": "text", "id": "hero_caption_override", "label": "Hero caption override" },
        {
          "type": "select",
          "id": "heading_tag",
          "label": "Heading tag",
          "default": "h2",
          "options": [
            { "value": "h1", "label": "H1" },
            { "value": "h2", "label": "H2" },
            { "value": "h3", "label": "H3" }
          ]
        },
        { "type": "color", "id": "heading_colour", "label": "Heading colour", "default": "#000000" },
        { "type": "color", "id": "band_colour", "label": "Band colour", "default": "#ffd200" },
        {
          "type": "header",
          "content": "Product button"
        },
        { "type": "checkbox", "id": "show_product_button", "label": "Show product button", "default": false },
        { "type": "text", "id": "button_text", "label": "Button text", "default": "Shop Now" }
      ]
    },
    {
      "type": "multicolumn",
      "name": "Multicolumn",
      "settings": [
        {
          "type": "inline_richtext",
          "id": "title",
          "label": "Heading"
        },
        {
          "type": "select",
          "id": "heading_size",
          "options": [
            { "value": "h2", "label": "Small" },
            { "value": "h1", "label": "Medium" },
            { "value": "h0", "label": "Large" },
            { "value": "hxl", "label": "Extra large" },
            { "value": "hxxl", "label": "XX-Large" }
          ],
          "default": "h1",
          "label": "Heading size"
        },
        {
          "type": "header",
          "content": "Image settings"
        },
        {
          "type": "select",
          "id": "image_width",
          "options": [
            { "value": "third", "label": "One third of column width" },
            { "value": "half", "label": "One half of column width" },
            { "value": "full", "label": "Full width" }
          ],
          "default": "full",
          "label": "Image width"
        },
        {
          "type": "select",
          "id": "image_ratio",
          "options": [
            { "value": "adapt", "label": "Adapt to image" },
            { "value": "portrait", "label": "Portrait" },
            { "value": "square", "label": "Square" },
            { "value": "circle", "label": "Circle" }
          ],
          "default": "adapt",
          "label": "Image ratio"
        },
        {
          "type": "header",
          "content": "Button settings"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "info": "Leave blank to hide the button."
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "header",
          "content": "Layout settings"
        },
        {
          "type": "range",
          "id": "columns_desktop",
          "min": 1,
          "max": 6,
          "step": 1,
          "default": 3,
          "label": "Number of columns on desktop"
        },
        {
          "type": "select",
          "id": "column_alignment",
          "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" }
          ],
          "default": "left",
          "label": "Column alignment"
        },
        {
          "type": "select",
          "id": "background_style",
          "options": [
            { "value": "none", "label": "None" },
            { "value": "primary", "label": "Primary" }
          ],
          "default": "primary",
          "label": "Container color scheme"
        },
        {
          "type": "color_scheme",
          "id": "color_scheme",
          "label": "Color scheme",
          "default": "scheme-1"
        },
        {
          "type": "header",
          "content": "Mobile settings"
        },
        {
          "type": "select",
          "id": "columns_mobile",
          "options": [
            { "value": "1", "label": "1 column" },
            { "value": "2", "label": "2 columns" }
          ],
          "default": "1",
          "label": "Number of columns on mobile"
        },
        {
          "type": "checkbox",
          "id": "swipe_on_mobile",
          "default": false,
          "label": "Enable swipe on mobile"
        },
        {
          "type": "header",
          "content": "Section padding"
        },
        {
          "type": "range",
          "id": "padding_top",
          "min": 0,
          "max": 100,
          "step": 4,
          "unit": "px",
          "label": "Top padding",
          "default": 36
        },
        {
          "type": "range",
          "id": "padding_bottom",
          "min": 0,
          "max": 100,
          "step": 4,
          "unit": "px",
          "label": "Bottom padding",
          "default": 36
        }
      ]
    },
    {
      "type": "column",
      "name": "Column",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "inline_richtext",
          "id": "title",
          "default": "Column",
          "label": "Heading"
        },
        {
          "type": "richtext",
          "id": "text",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>",
          "label": "Description"
        },
        {
          "type": "text",
          "id": "link_label",
          "label": "Link label",
          "info": "Leave blank to hide the link."
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "presets": [{ "name": "Detailed product builder" }]
}
{% endschema %}

{% stylesheet %}
  .section--detailed-product-builder {
    padding: 2rem 0;
  }
  .builder-divider {
    margin: 2rem 0;
    opacity: 0.25;
  }
  .builder-button .button {
    margin-top: 0.5rem;
  }
  .builder-collection .grid {
    display: grid;
    grid-template-columns: repeat(var(--grid-cols), 1fr);
    gap: 1.5rem;
  }
  .builder-video .video-wrapper {
    position: relative;
    padding-bottom: 56.25%;
    height: 0;
  }
  .builder-video iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  }
  .builder-image {
    margin: 2rem auto;
  }
  .builder-image__caption {
    font-size: 0.85rem;
    opacity: 0.7;
    margin-top: 0.25rem;
    text-align: center;
  }
  /* Editorial feature layout - Responsive percentage-based positioning */
  .editorial-feature {
    position: relative;
    margin: 4rem 0;
  }
  .editorial-feature__stage {
    position: relative;
    width: 100%;
    max-width: 1301px;
    height: 0;
    padding-bottom: 110.5%; /* 1438/1301 = 110.5% aspect ratio */
    margin: 0 auto;
    background: transparent;
  }
  .editorial-feature__stage::before {
    content: '';
    position: absolute;
    width: 99.9%; /* 1300/1301 */
    height: 96.2%; /* 1384/1438 */
    left: 0.08%; /* 1/1301 */
    top: 3.8%; /* 54/1438 */
    background: white;
    z-index: 1;
  }
  .editorial-feature__band {
    position: absolute;
    width: 100vw;
    height: 400px;
    left: 0;
    right: 0;
    display: initial;
    top: 460px;
    background: var(--band-col, #f6c100);
    z-index: 2;
  }
  .polaroid {
    position: absolute;
    z-index: 3;
    background: transparent;
    padding: 0;
    box-shadow: none;
  }
  .polaroid__frame {
    position: relative;
    background: transparent;
  }
  .polaroid__frame img {
    width: 100%;
    height: auto;
    display: block;
  }
  .polaroid__caption {
    display: none; /* Hide captions to match reference */
  }
  .polaroid--hero {
    width: 37%;
    left: 15px;
    top: 50px;
    transform: none;
  }
  .polaroid--small {
    width: 21.1%; /* 274.12/1301 */
    left: 75%; /* 976/1301 */
    top: 27.1%; /* 390/1438 */
    transform: none;
  }
  .polaroid--tertiary {
    width: 31.2%; /* 406.14/1301 */
    left: 61%; /* 794/1301 */
    top: 52.2%; /* 751/1438 */
    transform: none;
  }
  .editorial-feature__copy {
    position: absolute;
    width: 15.2%; /* 198/1301 */
    left: 50.2%; /* 653/1301 */
    top: 34.8%; /* 500/1438 */
    color: black;
    font-size: clamp(14px, 1.5vw, 20px);
    font-family: 'Playfair Display', var(--font-heading-family);
    font-weight: 400;
    line-height: 1.5;
    z-index: 4;
    text-align: left;
    padding: 0;
  }
  .editorial-feature__copy .intro-text {
    display: none; /* Hide intro text to match reference */
  }
  .editorial-feature .feature-title {
    font-family: 'Playfair Display', var(--font-heading-family);
    font-size: clamp(14px, 1.5vw, 20px);
    font-weight: 400;
    color: var(--title-col, black);
    margin: 0;
    line-height: 1.5;
  }
  .editorial-feature .feature-product-link {
    color: inherit;
    text-decoration: none;
    transition: opacity 0.2s ease;
  }
  .editorial-feature .feature-product-link:hover {
    opacity: 0.7;
  }
  .editorial-feature .feature-price {
    font-size: clamp(14px, 1.5vw, 20px);
    margin: 0;
    font-weight: 400;
    font-family: 'Playfair Display', var(--font-heading-family);
    line-height: 1.5;
  }
  .editorial-feature__description {
    position: absolute;
    width: 44.8%; /* 583/1301 */
    left: 6.8%; /* 89/1301 */
    top: 57.7%; /* 830/1438 */
    color: black;
    font-size: clamp(16px, 1.8vw, 24px);
    font-family: 'Playfair Display', var(--font-heading-family);
    font-weight: 400;
    line-height: 1.5;
    z-index: 4;
  }
  .editorial-feature__cta {
    position: absolute;
    left: 6.8%; /* 89/1301 */
    top: 85%; /* Below description */
    z-index: 4;
  }
  .editorial-feature__cta .button {
    font-size: clamp(14px, 1.5vw, 18px);
    padding: 0.8rem 2rem;
    font-family: 'Playfair Display', var(--font-heading-family);
  }
  .editorial-feature__intro-text {
    position: absolute;
    width: 38%; /* 495/1301 */
    left: 55.4%; /* 721/1301 */
    top: 3.8%; /* 54/1438 */
    color: black;
    font-size: clamp(16px, 1.8vw, 24px);
    font-family: 'Playfair Display', var(--font-heading-family);
    font-weight: 400;
    line-height: 1.5;
    z-index: 4;
  }
  .editorial-feature__main-title {
    position: absolute;
    left: 5.9%; /* 77/1301 */
    top: 0%;
    color: black;
    font-size: clamp(24px, 3.7vw, 48px);
    font-family: 'Playfair Display', var(--font-heading-family);
    font-weight: 400;
    line-height: 1;
    z-index: 4;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }
  @media (max-width: 1200px) {
    .editorial-feature__stage {
      max-width: 100%;
      padding-bottom: 120%; /* Slightly taller on smaller screens */
    }
    .editorial-feature__copy {
      font-size: clamp(12px, 2vw, 18px);
    }
    .editorial-feature__description {
      font-size: clamp(14px, 2.2vw, 22px);
    }
    .editorial-feature__intro-text {
      font-size: clamp(14px, 2.2vw, 22px);
    }
    .editorial-feature__main-title {
      font-size: clamp(20px, 4vw, 40px);
    }
  }
  @media (max-width: 900px) {
    .editorial-feature__stage {
      background: white;
      padding: 2rem 1rem 3rem;
      height: auto;
      padding-bottom: 0;
      position: relative;
    }
    .editorial-feature__stage::before {
      display: none;
    }
    .editorial-feature__band {
      position: static;
      width: calc(100% + 2rem);
      height: auto;
      min-height: 100px;
      margin: 2rem -1rem;
      left: auto;
      top: auto;
    }
    .polaroid,
    .polaroid--hero,
    .polaroid--small,
    .polaroid--tertiary {
      position: static;
      width: 100%;
      max-width: 300px;
      height: auto;
      margin: 2rem auto;
      left: auto;
      top: auto;
      display: block;
    }
    .editorial-feature__copy {
      position: static;
      width: 100%;
      text-align: center;
      left: auto;
      top: auto;
      margin: 2rem auto;
    }
    .editorial-feature__description {
      position: static;
      width: 100%;
      margin: 2rem auto 0;
      left: auto;
      top: auto;
    }
    .editorial-feature__cta {
      position: static;
      margin: 2rem auto 0;
      text-align: center;
      left: auto;
      top: auto;
    }
    .editorial-feature__intro-text {
      position: static;
      width: 100%;
      margin: 2rem auto;
      left: auto;
      top: auto;
    }
    .editorial-feature__main-title {
      position: static;
      width: 100%;
      text-align: center;
      margin-bottom: 2rem;
      left: auto;
      top: auto;
      justify-content: center;
    }
  }
  @media (max-width: 600px) {
    .editorial-feature__copy {
      font-size: 16px;
    }
    .editorial-feature__description {
      font-size: 18px;
    }
    .editorial-feature__intro-text {
      font-size: 18px;
    }
    .editorial-feature__main-title {
      font-size: 32px;
    }
  }
  @media (max-width: 1200px) {
    .editorial-feature__stage {
      min-height: 600px;
    }
    .polaroid--hero {
      left: 60px;
      width: 240px;
    }
    .polaroid--small {
      right: 80px;
      width: 180px;
    }
    .polaroid--tertiary {
      right: 40px;
      width: 320px;
    }
    .editorial-feature__copy {
      margin-left: -180px;
      width: 360px;
    }
    .editorial-feature__description {
      left: 60px;
      max-width: 400px;
    }
  }
  @media (max-width: 900px) {
    .editorial-feature__stage {
      padding: 2rem 1rem 3rem;
      min-height: auto;
      background: #fff;
    }
    .editorial-feature__band {
      position: static;
      height: auto;
      min-height: 200px;
      margin: 2rem -1rem;
    }
    .polaroid,
    .polaroid--hero,
    .polaroid--small,
    .polaroid--tertiary {
      position: static;
      width: 100%;
      max-width: 300px;
      margin: 1.5rem auto;
      transform: none;
      display: block;
    }
    .editorial-feature__copy {
      position: static;
      transform: none;
      left: auto;
      margin: 2rem auto 0;
      width: 100%;
      text-align: center;
      color: #000;
    }
    .editorial-feature__description {
      position: static;
      max-width: 100%;
      margin: 2rem auto 0;
      color: #000;
      text-align: center;
    }
  }
{% endstylesheet %}
{%- comment -%}
{%- endcomment -%}
